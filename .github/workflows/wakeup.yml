name: Streamlit Wakeup

on:
  schedule:
    # 3시간마다 실행 (UTC 기준)
    # Streamlit은 보통 며칠간 접속이 없으면 잠들지만,
    # 확실한 유지를 위해 하루 8번 정도 실행합니다.
    - cron: '35 */3 * * *'
  
  # 수동으로 실행 버튼을 눌러 테스트할 수 있게 함
  workflow_dispatch:

jobs:
  wake-up-job:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install playwright

      - name: Install Playwright Browsers
        run: |
          playwright install chromium

      - name: Run Wake Up Script
        run: python wake_up.py
